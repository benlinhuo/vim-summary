##vim 常用用法

终端上直接敲命令：vimtutor，便可以打开系统自带的 vim 教程

###vim 的几种基本模式

1. 普通模式：即我们刚通过 vim xxx 打开xxx文件，它处于的默认模式
2. 插入模式：当我们按下 i 键，便进入了 insert mode
3. 可视模式：该模式下，我们可以选择一些字符、行、列等。ctrl + v便可以进入。visual block模式
4. 命令行模式：我们在普通模式下，按下冒号（:）便进入，可以输入各种命令，如:set nu，可以设置行号
5. 替换模式：在普通模式，按下大写的 R，便可以进入替换模式，可以按 <ESC> 重回普通模式

特别提示：按 <ESC> 键，可以将您带回到正常模式或者取消一个不期望或者部分完成的命令

进入插入模式的几种方式
```javascript
i           插入的位置在当前光标之前插入
a           插入的位置在当前光标之后插入（append）
I           插入的位置在该行的最开始位置
A           插入的位置在该行的结束位置之后

o           光标下新开一行进入插入模式
O           光标之上新开一行，同上方向相反
```

###vim 常用用法

特别说明的点：
1. 一般的小写字母，带有方向的话，都表示向后或者向下。而对应的大部分都有大写字母，则是往前或者向上。
2. 大部分光标移动的快捷键，都可以加数字，到指定的行或列
3. 以下没有指定模式的，都指的是普通模式

####第一部分：光标的移动
```javascript
光标在屏幕文本中的移动既可以使用箭头键，也可以使用 hjkl 字母键
    h (左移)        j (下行)       k (上行)        l (右移)

行内字符移动：
w           将光标右移一个 word。光标停留在下一个字的字首位置
W           将光标右移一个 word。光标停留在下一个字的字首位置（即使两个字之间存在标点符号）
b           将光标左移一个字。光标停留在下一个字的字首位置(back)
B           将光标左移一个字。光标停留在下一个字的字首位置（即使两个字之间存在标点符号）
e           把光标移至当前所在字（或下一个字）的最后一个字符位置(end)
E           同上，只是以空格字符作为字的分隔符
^           把光标移至当前行的起始位置，也即当前行的第一个非空白字符位置
$           把光标移至当前行的行尾，也即当前行的最后一个字符位置
f＋字符      表示跳到当前光标处下一个指定字符处，光标落在指定字符上 (find)
F＋字符      表示往回跳转到指定的字符处，光标落在指定字符
t＋字符      同 f＋字符，不同点是最后光标落在指定字符的前一个
T＋字符      同 F＋字符，不同点是最后光标落在指定字符的前一个
不常用：   
H           把光标移至编辑窗口顶部第一行的行首位置
M           把光标移至编辑窗口中间一行的行首位置
L           把光标移至编辑窗口底部最后一行的行首位置
以上表示屏幕的绝对位置，H: 屏幕顶部（head）， M: 屏幕中间（middle），L: 屏幕底部（last）


多行之间移动：
Ctrl＋F      往下滚动一屏（front）
Ctrl＋B      往上滚动一屏（back）
Ctrl＋u      向上翻半页（up）
Ctrl＋d      向下翻半页（down）
Ctrl＋e      编辑窗口中文件内容整体上移一行
Ctrl＋y      编辑窗口中文件内容整体下移一行

gg           跳转到文件的开始
数字＋gg      跳转到指定行数（同命令行模式下，冒号(:)＋数字）
shift＋g     跳转到文件结尾
    


搜索（命令行模式下）
/+字符        向下搜索指定字符（n：向下下一个，N：向上下一个）
?＋字符        向上搜索指定字符          

分号(;)       表示向下重复刚刚的操作。如fa，表示行内查找到 a字符，之后再按;，表示接着查找下一个行内 a字符
逗号(,)       同上，只是方向向上，或者向左

*            表示查找当前光标所在位置的单词，方向向下
#            同上，方向向上

%            很多字符成对出现，如（），当前光标在左括号，则%会跳转到右括号。右括号也会跳转到左括号。html tag也都是可以跳转的


段落跳转
{             跳转到上一个空白行
}             跳转到下一个空白行
[{            跳转到当前区块的开头
]}            跳转到当前区块的结尾
```


#### 文本的编辑

删除
```javascript
普通模式下，命令的格式：
[number]   command   object  或者   command  [number]   object
其意：
number     代表的是命令执行次数
command    代表要做的事情，如 d 代表删除
object     代表要操作的对象，如 w 代表单字/词，$ 代表到行末等等


dw            从光标处删除至单字/单词末尾
x             从当前鼠标往后删除单个字符
X             从当前鼠标往前删除单个字符
{n}dd         dd 删除当前行，{n}dd会删除指定的n行（本行往后n行）

```

撤销
```javascript
u             撤销以前单个操作
U             撤销在一行中所作的所有改动，一次性撤销
ctrl＋r       撤销刚刚的撤销动作，不过只能一个个撤销
```

替换
```javascript
r＋字符        用指定的字符替换光标所在位置的字符（replace）
c＋object     改变指定的对象，从当前光标所在位置到对象的末尾。比如 cw 可以替换当前光标到单词的末尾内容，输入 c$ 可以替换当前光标到行末的内容。（change）

其实 cw 是删除当前光标到该单词的结束位置，且进入 insert 模式。这样之后输入的内容就相当于替换了之前的内容。(c$ 同理)也可以是 2cw

更改类命令格式：
[number]   command    object   或者    command    [number]    object
```

拷贝
```javascript
{n}yy        复制当前行，如果有n，表示复制从当前行往后的 n 行 （y 表示yank，复制，因为copy中的c被占用了）
yw           复制当前光标处至后的一个单词

y＋object    复制指定的object对象
```

粘贴
```javascript
{n}p         粘贴，如果有n，表示将刚刚复制的，或者删除的内容粘贴n次(其实删除的内容也会被放到寄存器中存储)
```

visual 模式
```javascript
i ：选中如（）内部的内容，不包括边界（i表示internal）
a ：选中如（）包括括号所有内容，all

v i ( ：选中（）中的所有内容
v i t ：t表示html中的tag，所有标签都用tag表示
```

visual block模式
```javascript
注释多行
    1. 按CTRL + V 进入可视化模式（VISUAL BLOCK）在ESC的模式下才可行
    2. 移动光标上移或者下移，选中多行的开头
    3. 选择完毕，按shift + i ，此时下方提示进入 “inse模式，输入你要插入的注释符，例如“#”
    4. 最后按ESC键，就会发现多行代码已经被注释了 

删除多行的注释：
    1. 同样，Ctrl + v 进入列选择模式
    2. 移动光标把注释符选中
    3. 按下d，注释就被删除了
```

复制多行
```javascript
方法1:先nyy（复制n行），然后到指定的行按p
方法2:先v（进入visual模式），选中多行按y（复制），然后到指定的行按p  
```


自动补全
```javascript
ctrl＋n         补全本文中已经出现的单词，同sublime效果。ctrl＋n也可以向下选择选项
ctrl＋x  和  ctrl＋o 其他补全模式
```

命令行模式：替换
```javascript
1. 在一行內替換頭一個字符串 old 為新的字符串 new，請輸入  :s/old/new
2. 在一行內替換所有的字符串 old 為新的字符串 new，請輸入  :s/old/new/g
3. 在兩行內替換所有的字符串 old 為新的字符串 new，請輸入  :#,#s/old/new/g
4. 在文件內替換所有的字符串 old 為新的字符串 new，請輸入  :%s/old/new/g
5. 進行全文替換時詢問用戶確認每個替換需添加 c 選項，請輸入 :%s/old/new/gc
```

命令行模式：其他
```javascript
1. :!command 用于執行一個外部命令 command。
    請看一些實際例子︰
        :!dir          -  用于顯示當前目錄的內容。
        :!rm FILENAME  -  用于刪除名為 FILENAME 的文件。

2. :w FILENAME  可將當前 VIM 中正在編輯的文件保存到名為 FILENAME
   的文件中。

3. :#,#w FILENAME 可將當前編輯文件第 # 行至第 # 行的內容保存到文件
   FILENAME 中。

4. :r FILENAME 可提取磁盤文件 FILENAME 並將其插入到當前文件的光標位置
     後面。

5. 輸入 :set xxx 可以設置 xxx 選項。
     如设置ic选项（ic就是英文忽略大小写Ignore Case的首字母缩写词），即输入：set ic

6. :number ，表示跳转到指定的number行上
```

以上命令行模式下的命令，我们都可以通过命令行来做到
```javascript

vim  +   abc：打开文件，光标定位在最后一行
vim  +4   abc：打开文件，光标定位在第4行。如果数字>总行数，则默认是最后一行
vim ＋/imooc  abc：打开文件，光标会定位在imooc第一次出现的那一行。紧接着，可以按n来进行向下切换（相当于搜索模式,）

vim  aa bb cc：我们同时用vim打开或者创建aa/bb/cc文件。我们在命令模式下，可以按n（也可以是冒号：next）进行由aa切换到bb，按n切换到cc。如果想要往回切换，则输入大写的N（或者：prev）。这些都需要先按冒号，如：prev

```